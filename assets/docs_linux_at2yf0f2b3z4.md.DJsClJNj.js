import{_ as n,a,o as l,a3 as e}from"./chunks/framework.dRMRuUHH.js";const b=JSON.parse('{"title":"yumæºå¸¸ç”¨é…ç½®","description":"","frontmatter":{"id":1001,"title":"yumæºå¸¸ç”¨é…ç½®","createTime":"2023-12-21 23:14:27","category":"linux"},"headers":[],"relativePath":"docs/linux/at2yf0f2b3z4.md","filePath":"docs/linux/00101_yum_config.md"}'),p={name:"docs/linux/at2yf0f2b3z4.md"};function o(r,s,c,t,i,d){return l(),a("div",null,[...s[0]||(s[0]=[e(`<h2 id="å¸¸ç”¨yumæºåœ°å€" tabindex="-1">å¸¸ç”¨yumæºåœ°å€ <a class="header-anchor" href="#å¸¸ç”¨yumæºåœ°å€" aria-label="Permalink to â€œå¸¸ç”¨yumæºåœ°å€â€">â€‹</a></h2><p>baseæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">curl</span><span style="color:#AE81FF;"> -o</span><span style="color:#E6DB74;"> /etc/yum.repos.d/Centos-Base.repo</span><span style="color:#E6DB74;"> https://mirrors.aliyun.com/repo/Centos-7.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>epelæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">curl</span><span style="color:#AE81FF;"> -o</span><span style="color:#E6DB74;"> /etc/yum.repos.d/epel.repo</span><span style="color:#E6DB74;"> https://mirrors.aliyun.com/repo/epel-7.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>docker-ceæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">yum</span><span style="color:#E6DB74;"> install</span><span style="color:#AE81FF;"> -y</span><span style="color:#E6DB74;"> yum-utils</span><span style="color:#E6DB74;"> device-mapper-persistent-data</span><span style="color:#E6DB74;"> lvm2</span></span>
<span class="line"><span style="color:#A6E22E;">yum-config-manager</span><span style="color:#AE81FF;"> --add-repo</span><span style="color:#E6DB74;"> https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>kubernetesæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">cat</span><span style="color:#F92672;"> &lt;&lt;</span><span style="color:#F8F8F2;">EOF</span><span style="color:#F92672;"> &gt;</span><span style="color:#E6DB74;"> /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="color:#E6DB74;">[kubernetes]</span></span>
<span class="line"><span style="color:#E6DB74;">name=Kubernetes</span></span>
<span class="line"><span style="color:#E6DB74;">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></span>
<span class="line"><span style="color:#E6DB74;">enabled=1</span></span>
<span class="line"><span style="color:#E6DB74;">gpgcheck=1</span></span>
<span class="line"><span style="color:#E6DB74;">repo_gpgcheck=1</span></span>
<span class="line"><span style="color:#E6DB74;">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span>
<span class="line"><span style="color:#F8F8F2;">EOF</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>cephæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">cat</span><span style="color:#F92672;"> &gt;&gt;</span><span style="color:#E6DB74;"> ceph.repo</span><span style="color:#F92672;"> &lt;&lt;</span><span style="color:#F8F8F2;"> EOF</span></span>
<span class="line"><span style="color:#E6DB74;">[ceph]</span></span>
<span class="line"><span style="color:#E6DB74;">name=ceph</span></span>
<span class="line"><span style="color:#E6DB74;">baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/x86_64/</span></span>
<span class="line"><span style="color:#E6DB74;">enable=1</span></span>
<span class="line"><span style="color:#E6DB74;">gpgcheck=0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">[ceph-noarch]</span></span>
<span class="line"><span style="color:#E6DB74;">name=cephnoarch</span></span>
<span class="line"><span style="color:#E6DB74;">baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/noarch/</span></span>
<span class="line"><span style="color:#E6DB74;">enable=1</span></span>
<span class="line"><span style="color:#E6DB74;">gpgcheck=0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">[ceph-source]</span></span>
<span class="line"><span style="color:#E6DB74;">name=Ceph source packages</span></span>
<span class="line"><span style="color:#E6DB74;">baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/SRPMS</span></span>
<span class="line"><span style="color:#E6DB74;">enable=1</span></span>
<span class="line"><span style="color:#E6DB74;">gpgcheck=0</span></span>
<span class="line"><span style="color:#F8F8F2;">EOF</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="å¦‚ä½•åˆ¶ä½œæœ¬åœ°yumæº" tabindex="-1">å¦‚ä½•åˆ¶ä½œæœ¬åœ°yumæº <a class="header-anchor" href="#å¦‚ä½•åˆ¶ä½œæœ¬åœ°yumæº" aria-label="Permalink to â€œå¦‚ä½•åˆ¶ä½œæœ¬åœ°yumæºâ€">â€‹</a></h2><p>å½“ä½ éœ€è¦ç»™å†…ç½‘ç¯å¢ƒå®‰è£… rpm åŒ…ï¼Œå¹¶ä¸” CentOS-7-x86_64-*.iso ä¸­è‡ªå¸¦çš„ rpm åŒ…æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œé€šå¸¸ä¼šé…ç½®ç›¸å…³è½¯ä»¶çš„æœ¬åœ° yum æºï¼›ä¸‹æ–‡ä¸­å·²å®‰è£… <code>docker-ce-18.09</code> ä¸ºä¾‹</p><p>step01 æŸ¥çœ‹æ‰€æœ‰å¯ä»¥å®‰è£…çš„ç‰ˆæœ¬</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">yum</span><span style="color:#E6DB74;"> list</span><span style="color:#E6DB74;"> docker-ce</span><span style="color:#AE81FF;"> --showduplicates</span><span style="color:#F92672;"> |</span><span style="color:#A6E22E;"> sort</span><span style="color:#AE81FF;"> -r</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>step02 ä¸‹è½½å®‰è£…åŒ…åˆ°æŒ‡å®šç›®å½•ï¼Œå…¶ä¸­ç‰ˆæœ¬å·ä¸ºå†’å·<code>:</code>å¼€å§‹è‡³ç¬¬ä¸€ä¸ªè¿å­—ç¬¦<code>-</code>ç»“æŸ</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">yum</span><span style="color:#E6DB74;"> install</span><span style="color:#E6DB74;"> docker-ce-18.09.9</span><span style="color:#E6DB74;"> docker-ce-cli-18.09.9</span><span style="color:#AE81FF;"> --downloadonly</span><span style="color:#AE81FF;"> --downloaddir=docker-ce/packages/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>step03 ç”Ÿæˆrepodataå…ƒæ•°æ®</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">createrepo</span><span style="color:#E6DB74;"> docker-ce/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="åˆ›å»ºå¸¦sslè¯ä¹¦çš„æœ¬åœ°yumæº" tabindex="-1">åˆ›å»ºå¸¦sslè¯ä¹¦çš„æœ¬åœ°yumæº <a class="header-anchor" href="#åˆ›å»ºå¸¦sslè¯ä¹¦çš„æœ¬åœ°yumæº" aria-label="Permalink to â€œåˆ›å»ºå¸¦sslè¯ä¹¦çš„æœ¬åœ°yumæºâ€">â€‹</a></h2><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šè¦æ±‚é…ç½®å¸¦ ssl çš„æœ¬åœ° yum æº</p><p>step01 å®‰è£… <code>httpd</code>ã€<code>mod_ssl</code>ï¼Œå½“ç„¶å®‰è£…å…¶å®ƒçš„é™æ€æ–‡ä»¶æœåŠ¡å™¨ä¹Ÿè¡Œï¼Œä¾‹å¦‚ nginx</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">yum</span><span style="color:#E6DB74;"> install</span><span style="color:#E6DB74;"> httpd</span><span style="color:#E6DB74;"> mod_ssl</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>step02 ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>/etc/httpd/conf.d/ssl.conf</code>ï¼ŒæŒ‡å®šæœåŠ¡ç«¯è¯ä¹¦å’Œkey</p><p>ğŸ‘‰<a href="/vdocs/docs/linux/at2yf0f2b3zx.html">å¦‚ä½•åˆ›å»ºè¯ä¹¦</a></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">Listen</span><span style="color:#AE81FF;"> 9090</span><span style="color:#E6DB74;"> https</span></span>
<span class="line"><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">VirtualHost _default_:</span><span style="color:#F92672;">9090&gt;</span></span>
<span class="line"><span style="color:#A6E22E;">SSLCertificateFile</span><span style="color:#E6DB74;"> /etc/httpd/certs/192.168.10.11-server.crt</span></span>
<span class="line"><span style="color:#A6E22E;">SSLCertificateKeyFile</span><span style="color:#E6DB74;"> /etc/httpd/certs/192.168.10.11-server.key</span></span>
<span class="line"><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">/VirtualHost</span><span style="color:#F92672;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>step03 é…ç½® <code>/etc/yum.repos.d/network.repo</code>ï¼Œç›¸å…³é…ç½®å‚è€ƒ: <code>man yum.conf</code></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F8F8F2;">[network]</span></span>
<span class="line"><span style="color:#F8F8F2;">name</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">network</span></span>
<span class="line"><span style="color:#F8F8F2;">baseurl</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">https://192.168.10.11:9090/network</span></span>
<span class="line"><span style="color:#F8F8F2;">enabled</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">1</span></span>
<span class="line"><span style="color:#F8F8F2;">gpgcheck</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">0</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">sslverify</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">1</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">sslcacert</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">/etc/yum.repos.d/certs/ca.crt</span></span>
<span class="line"><span style="color:#F8F8F2;">[docker-ce]</span></span>
<span class="line"><span style="color:#F8F8F2;">name</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">docker-ce</span></span>
<span class="line"><span style="color:#F8F8F2;">baseurl</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">https://192.168.10.11:9090/docker-ce</span></span>
<span class="line"><span style="color:#F8F8F2;">enabled</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">1</span></span>
<span class="line"><span style="color:#F8F8F2;">gpgcheck</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">0</span></span>
<span class="line highlighted"><span style="color:#F8F8F2;">sslverify</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">0</span></span>
<span class="line"><span style="color:#88846F;"># sslcacert=/etc/yum.repos.d/certs/ca.crt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="é—®é¢˜" tabindex="-1">é—®é¢˜ <a class="header-anchor" href="#é—®é¢˜" aria-label="Permalink to â€œé—®é¢˜â€">â€‹</a></h2><h3 id="yumå‘½ä»¤è¡Œè¢«æŒ‚èµ·-æ— å“åº”" tabindex="-1">yumå‘½ä»¤è¡Œè¢«æŒ‚èµ·ï¼Œæ— å“åº” <a class="header-anchor" href="#yumå‘½ä»¤è¡Œè¢«æŒ‚èµ·-æ— å“åº”" aria-label="Permalink to â€œyumå‘½ä»¤è¡Œè¢«æŒ‚èµ·ï¼Œæ— å“åº”â€">â€‹</a></h3><p>æ’æŸ¥åŸå› æ˜¯ rpm çš„æ–‡ä»¶é”æ²¡æœ‰é‡Šæ”¾ï¼Œå¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶é”</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#A6E22E;">mv</span><span style="color:#E6DB74;"> /var/lib/rpm/.rpm.lock</span><span style="color:#E6DB74;"> bak/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,32)])])}const y=n(p,[["render",o]]);export{b as __pageData,y as default};
