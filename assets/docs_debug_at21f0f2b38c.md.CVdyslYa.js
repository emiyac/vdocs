import{_ as n,a,o as e,a3 as p}from"./chunks/framework.dRMRuUHH.js";const F=JSON.parse('{"title":"å®¹å™¨ä¸­çš„seccompç­–ç•¥","description":"","frontmatter":{"id":4002,"title":"å®¹å™¨ä¸­çš„seccompç­–ç•¥","createTime":"2025-08-29 12:52:25","category":"debug"},"headers":[],"relativePath":"docs/debug/at21f0f2b38c.md","filePath":"docs/debug/002_docker_k8s_seccomp.md"}'),l={name:"docs/debug/at21f0f2b38c.md"};function o(c,s,r,t,i,d){return e(),a("div",null,[...s[0]||(s[0]=[p(`<h2 id="é—®é¢˜æè¿°" tabindex="-1">é—®é¢˜æè¿° <a class="header-anchor" href="#é—®é¢˜æè¿°" aria-label="Permalink to â€œé—®é¢˜æè¿°â€">â€‹</a></h2><p>ä½¿ç”¨dockerå¯åŠ¨å®¹å™¨ï¼ŒæŸ¥çœ‹æ—¥å¿—å‡ºç°<code>OpenBLAS blas_thread_initL pthread_create failed for thread 1 of 4: Operationn not permitted</code></p><p><code>OpenBLAS</code>æ˜¯ä¸€ä¸ªç”¨<code>C</code>è¯­è¨€ç¼–å†™çš„é«˜æ€§èƒ½æ•°å­¦åº“, å®ƒä¸ºäº†æè‡´æ€§èƒ½, ä¼šç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿåº•å±‚çš„çº¿ç¨‹åº“(å¦‚<code>Pthreads</code>), å½“å®ƒå°è¯•åˆ›å»ºçº¿ç¨‹æ—¶, æ˜¯ç›´æ¥å‘<code>Linux</code>å†…æ ¸å‘èµ·ç³»ç»Ÿè°ƒç”¨(å¦‚<code>clone()</code>), è¿™ç§ç›´æ¥çš„ç³»ç»Ÿè°ƒç”¨ä¼šæ›´å¤šåœ°å—åˆ°Linuxå®‰å…¨æ¨¡å—(å¦‚<code>Seccomp</code>)çš„å®¡æŸ¥</p><h2 id="dockerçš„é»˜è®¤seccompç­–ç•¥" tabindex="-1">dockerçš„é»˜è®¤seccompç­–ç•¥ <a class="header-anchor" href="#dockerçš„é»˜è®¤seccompç­–ç•¥" aria-label="Permalink to â€œdockerçš„é»˜è®¤seccompç­–ç•¥â€">â€‹</a></h2><p><code>docker</code>çš„é»˜è®¤<code>Seccomp</code>ç­–ç•¥é˜»æ­¢äº†44ä¸ªè¢«è®¤ä¸ºå±é™©çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå…¶ä¸­å°±åŒ…æ‹¬ä¸€äº›ä¸é«˜çº§çº¿ç¨‹æ“ä½œç›¸å…³çš„è°ƒç”¨</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#88846F;"># ä½¿ç”¨dockerå¯åŠ¨ï¼Œå¹¶ä¸”æŸ¥çœ‹Seccompç­–ç•¥</span></span>
<span class="line"><span style="color:#A6E22E;">cat</span><span style="color:#E6DB74;"> /proc/</span><span style="color:#F8F8F2;">$pid</span><span style="color:#E6DB74;">/status</span><span style="color:#F92672;"> |</span><span style="color:#A6E22E;"> grep</span><span style="color:#E6DB74;"> Seccomp</span></span>
<span class="line"><span style="color:#A6E22E;">Seccomp:</span><span style="color:#AE81FF;"> 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># è§£å†³æ–¹æ¡ˆæ·»åŠ </span></span>
<span class="line highlighted"><span style="color:#A6E22E;">docker</span><span style="color:#E6DB74;"> run</span><span style="color:#AE81FF;"> --security-opt</span><span style="color:#E6DB74;"> seccomp=unconfined</span><span style="color:#E6DB74;"> your-image</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="kubernetesçš„é»˜è®¤seccompç­–ç•¥" tabindex="-1">kubernetesçš„é»˜è®¤seccompç­–ç•¥ <a class="header-anchor" href="#kubernetesçš„é»˜è®¤seccompç­–ç•¥" aria-label="Permalink to â€œkubernetesçš„é»˜è®¤seccompç­–ç•¥â€">â€‹</a></h2><p>ä»<code>Kubernetes 1.19</code>å¼€å§‹ï¼Œç¤¾åŒºæ­£åœ¨æ¨åŠ¨ä½¿ç”¨é»˜è®¤çš„<code>seccomp</code>é…ç½®æ–‡ä»¶ä»¥æé«˜å®‰å…¨æ€§ï¼Œæ‰€ä»¥åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#88846F;"># ä½¿ç”¨kubernetesç¼–æ’æ–¹å¼å¯åŠ¨ï¼Œå¹¶ä¸”æŸ¥çœ‹Seccompç­–ç•¥</span></span>
<span class="line"><span style="color:#A6E22E;">cat</span><span style="color:#E6DB74;"> /proc/</span><span style="color:#F8F8F2;">$pid</span><span style="color:#E6DB74;">/status</span><span style="color:#F92672;"> |</span><span style="color:#A6E22E;"> grep</span><span style="color:#E6DB74;"> Seccomp</span></span>
<span class="line"><span style="color:#A6E22E;">Seccomp:</span><span style="color:#AE81FF;"> 0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>é«˜ç‰ˆæœ¬è§£å†³æ–¹æ¡ˆ</p><p>å®˜ç½‘æ–‡æ¡£ğŸ‘‰<a href="https://kubernetes.io/zh-cn/docs/reference/node/seccomp/" target="_blank" rel="noreferrer">Seccompå’ŒKubernetes</a></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F92672;">apiVersion</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">v1</span></span>
<span class="line"><span style="color:#F92672;">kind</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">Pod</span></span>
<span class="line"><span style="color:#F92672;">metadata</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">  name</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">pod</span></span>
<span class="line"><span style="color:#F92672;">spec</span><span style="color:#F8F8F2;">:</span></span>
<span class="line highlighted"><span style="color:#F92672;">  securityContext</span><span style="color:#F8F8F2;">:</span></span>
<span class="line highlighted"><span style="color:#F92672;">    seccompProfile</span><span style="color:#F8F8F2;">:</span></span>
<span class="line highlighted"><span style="color:#F92672;">      type</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">Unconfined</span></span>
<span class="line"><span style="color:#F92672;">  containers</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">  - </span><span style="color:#F92672;">name</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">container</span></span>
<span class="line"><span style="color:#F92672;">    image</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">docker.io/library/debian:stable</span></span>
<span class="line"><span style="color:#F92672;">    securityContext</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">      seccompProfile</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">        type</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">Unconfined</span></span>
<span class="line"><span style="color:#F8F8F2;">...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>`,12)])])}const m=n(l,[["render",o]]);export{F as __pageData,m as default};
