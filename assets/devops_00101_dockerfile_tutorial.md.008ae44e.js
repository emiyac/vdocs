import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.eabe3503.js";const m=JSON.parse('{"title":"基础镜像时区和中文字体配置","description":"","frontmatter":{"title":"基础镜像时区和中文字体配置","createTime":"2024/04/17 20:00:00","updateTime":"2024/04/17 21:00:00","isPublished":true},"headers":[],"relativePath":"devops/00101_dockerfile_tutorial.md","filePath":"devops/00101_dockerfile_tutorial.md"}'),p={name:"devops/00101_dockerfile_tutorial.md"},e=l(`<h2 id="基础镜像时区和中文字体配置" tabindex="-1">基础镜像时区和中文字体配置 <a class="header-anchor" href="#基础镜像时区和中文字体配置" aria-label="Permalink to &quot;基础镜像时区和中文字体配置&quot;">​</a></h2><h3 id="alpine镜像" tabindex="-1">alpine镜像 <a class="header-anchor" href="#alpine镜像" aria-label="Permalink to &quot;alpine镜像&quot;">​</a></h3><div class="language-dockerfile line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> alpine:latest</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#BABED8;"> set -ex &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    sed -i </span><span style="color:#C3E88D;">&#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39;</span><span style="color:#BABED8;"> /etc/apk/repositories &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    apk update &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    apk add tzdata ttf-dejavu fontconfig &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    cp -a /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    echo Asia/Shanghai &gt; /etc/timezone &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    apk del tzdata</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#BABED8;"> SimSun.ttf /usr/share/fonts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="debian镜像" tabindex="-1">debian镜像 <a class="header-anchor" href="#debian镜像" aria-label="Permalink to &quot;debian镜像&quot;">​</a></h3><p>高版本已将<code>/etc/apt/sources.list</code>移除</p><div class="language-dockerfile line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#BABED8;"> debian:latest</span></span>
<span class="line"><span style="color:#F78C6C;">RUN</span><span style="color:#BABED8;"> set -ex &amp;&amp; \\</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># sed -i &#39;s/deb.debian.org/mirrors.aliyun.com/g&#39; /etc/apt/sources.list &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    sed -i </span><span style="color:#C3E88D;">&#39;s/deb.debian.org/mirrors.aliyun.com/g&#39;</span><span style="color:#BABED8;"> /etc/apt/sources.list.d/debian.sources &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    apt-get clean &amp;&amp; apt-get update &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    apt-get install -y tzdata locales fontconfig &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    echo Asia/Shanghai &gt; /etc/timezone &amp;&amp; \\</span></span>
<span class="line"><span style="color:#BABED8;">    localedef -c -f UTF-8 -i zh_CN zh_CN.utf8</span></span>
<span class="line"><span style="color:#F78C6C;">ENV</span><span style="color:#BABED8;"> LANG zh_CN.utf8</span></span>
<span class="line"><span style="color:#F78C6C;">COPY</span><span style="color:#BABED8;"> SimSun.ttf /usr/share/fonts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="ubuntu镜像" tabindex="-1">ubuntu镜像 <a class="header-anchor" href="#ubuntu镜像" aria-label="Permalink to &quot;ubuntu镜像&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">FROM</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ubuntu:latest</span></span>
<span class="line"><span style="color:#FFCB6B;">RUN</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">set</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-ex</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">sed</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/security.ubuntu.com/mirrors.aliyun.com/g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/apt/sources.list</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#C792EA;">export</span><span style="color:#BABED8;"> DEBIAN_FRONTEND</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">noninteractive</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">apt-get</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">update</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">apt-get</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">tzdata</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">locales</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">fontconfig</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">ln</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-sf</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/usr/share/zoneinfo/Asia/Shanghai</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/localtime</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#82AAFF;">echo</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/timezone</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">localedef</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-c</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">UTF-8</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">zh_CN</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">zh_CN.utf8</span></span>
<span class="line"><span style="color:#FFCB6B;">ENV</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">LANG</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">zh_CN.utf8</span></span>
<span class="line"><span style="color:#FFCB6B;">COPY</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">SimSun.ttf</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/usr/share/fonts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="centos7镜像" tabindex="-1">centos7镜像 <a class="header-anchor" href="#centos7镜像" aria-label="Permalink to &quot;centos7镜像&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">FROM</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">centos:7.9.2009</span></span>
<span class="line"><span style="color:#FFCB6B;">RUN</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">set</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-ex</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">rm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d</span><span style="color:#BABED8;">*</span><span style="color:#C3E88D;">.repo</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">curl</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/Centos-Base.repo</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">https://mirrors.aliyun.com/repo/Centos-7.repo</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">yum</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">tzdata</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">fontconfig</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">glibc-common</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">ln</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-sf</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/usr/share/zoneinfo/Asia/Shanghai</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/localtime</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#82AAFF;">echo</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/timezone</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> \\</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">localedef</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-c</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">UTF-8</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">zh_CN</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">zh_CN.utf8</span></span>
<span class="line"><span style="color:#FFCB6B;">ENV</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">LANG</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">zh_CN.utf8</span></span>
<span class="line"><span style="color:#FFCB6B;">COPY</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">SimSun.ttf</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/usr/share/fonts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,10),o=[e];function r(t,c,B,i,y,D){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{m as __pageData,u as default};
