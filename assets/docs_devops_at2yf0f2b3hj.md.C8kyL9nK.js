import{_ as a,a as n,o as e,a3 as l}from"./chunks/framework.dRMRuUHH.js";const b=JSON.parse('{"title":"基础镜像配置时区和中文字体","description":"","frontmatter":{"id":1,"title":"基础镜像配置时区和中文字体","createTime":"2024-04-17 20:00:00","category":"devops"},"headers":[],"relativePath":"docs/devops/at2yf0f2b3hj.md","filePath":"docs/devops/00101_base_image_dockerfile.md"}'),p={name:"docs/devops/at2yf0f2b3hj.md"};function o(r,s,c,t,i,F){return e(),n("div",null,[...s[0]||(s[0]=[l(`<div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p><code>SimSun.ttf</code>为测试用中文字体, 按需添加或修改</p></div><h2 id="alpine镜像" tabindex="-1">alpine镜像 <a class="header-anchor" href="#alpine镜像" aria-label="Permalink to “alpine镜像”">​</a></h2><div class="language-dockerfile line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F92672;">FROM</span><span style="color:#F8F8F2;"> alpine:latest</span></span>
<span class="line"><span style="color:#F92672;">RUN</span><span style="color:#F8F8F2;"> set -ex &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    sed -i </span><span style="color:#E6DB74;">&#39;s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g&#39;</span><span style="color:#F8F8F2;"> /etc/apk/repositories &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    apk update &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    apk add tzdata ttf-dejavu fontconfig &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    cp -a /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    echo Asia/Shanghai &gt; /etc/timezone &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    apk del tzdata</span></span>
<span class="line"><span style="color:#F92672;">COPY</span><span style="color:#F8F8F2;"> SimSun.ttf /usr/share/fonts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="debian镜像" tabindex="-1">debian镜像 <a class="header-anchor" href="#debian镜像" aria-label="Permalink to “debian镜像”">​</a></h2><p>高版本已将<code>/etc/apt/sources.list</code>移除</p><div class="language-dockerfile line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F92672;">FROM</span><span style="color:#F8F8F2;"> debian:latest</span></span>
<span class="line"><span style="color:#F92672;">RUN</span><span style="color:#F8F8F2;"> set -ex &amp;&amp; \\</span></span>
<span class="line"><span style="color:#88846F;">    # sed -i &#39;s/deb.debian.org/mirrors.aliyun.com/g&#39; /etc/apt/sources.list &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    sed -i </span><span style="color:#E6DB74;">&#39;s/deb.debian.org/mirrors.aliyun.com/g&#39;</span><span style="color:#F8F8F2;"> /etc/apt/sources.list.d/debian.sources &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    apt-get clean &amp;&amp; apt-get update &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    apt-get install -y tzdata locales fontconfig &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    echo Asia/Shanghai &gt; /etc/timezone &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    localedef -c -f UTF-8 -i zh_CN zh_CN.utf8</span></span>
<span class="line"><span style="color:#F92672;">ENV</span><span style="color:#F8F8F2;"> LANG zh_CN.utf8</span></span>
<span class="line"><span style="color:#F92672;">COPY</span><span style="color:#F8F8F2;"> SimSun.ttf /usr/share/fonts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="ubuntu镜像" tabindex="-1">ubuntu镜像 <a class="header-anchor" href="#ubuntu镜像" aria-label="Permalink to “ubuntu镜像”">​</a></h2><div class="language-dockerfile line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F92672;">FROM</span><span style="color:#F8F8F2;"> ubuntu:latest</span></span>
<span class="line"><span style="color:#F92672;">RUN</span><span style="color:#F8F8F2;"> set -ex &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    sed -i </span><span style="color:#E6DB74;">&#39;s/security.ubuntu.com/mirrors.aliyun.com/g&#39;</span><span style="color:#F8F8F2;"> /etc/apt/sources.list &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    export DEBIAN_FRONTEND=noninteractive &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    apt-get update &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    apt-get install -y tzdata locales fontconfig &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    echo Asia/Shanghai &gt; /etc/timezone &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    localedef -c -f UTF-8 -i zh_CN zh_CN.utf8</span></span>
<span class="line"><span style="color:#F92672;">ENV</span><span style="color:#F8F8F2;"> LANG zh_CN.utf8</span></span>
<span class="line"><span style="color:#F92672;">COPY</span><span style="color:#F8F8F2;"> SimSun.ttf /usr/share/fonts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="centos7镜像" tabindex="-1">centos7镜像 <a class="header-anchor" href="#centos7镜像" aria-label="Permalink to “centos7镜像”">​</a></h2><div class="language-dockerfile line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki monokai" style="background-color:#272822;color:#F8F8F2;" tabindex="0" dir="ltr"><code><span class="line"><span style="color:#F92672;">FROM</span><span style="color:#F8F8F2;"> centos:7.9.2009</span></span>
<span class="line"><span style="color:#F92672;">RUN</span><span style="color:#F8F8F2;"> set -ex &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    rm -f /etc/yum.repos.d*.repo &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    curl -o /etc/yum.repos.d/Centos-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    yum install -y tzdata fontconfig glibc-common &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    echo Asia/Shanghai &gt; /etc/timezone &amp;&amp; \\</span></span>
<span class="line"><span style="color:#F8F8F2;">    localedef -c -f UTF-8 -i zh_CN zh_CN.utf8</span></span>
<span class="line"><span style="color:#F92672;">ENV</span><span style="color:#F8F8F2;"> LANG zh_CN.utf8</span></span>
<span class="line"><span style="color:#F92672;">COPY</span><span style="color:#F8F8F2;"> SimSun.ttf /usr/share/fonts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,10)])])}const u=a(p,[["render",o]]);export{b as __pageData,u as default};
